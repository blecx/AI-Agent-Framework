# Step 1 — ISO 21500/21502 Workflow Spine (PMP + RAID)
# Replace generic Step 1 issues with a project-management backbone aligned to ISO 21500/21502.
# Keep 3 issues for AI-Agent-Framework and 3 issues for AI-Agent-Framework-Client.

AI-Agent-Framework:
  - title: "Step 1 — Establish ISO 21500/21502 project governance + RAID register (backend)"
    body: |
      ## Goal
      Add a minimal, standards-aligned project governance backbone in the backend to support PMP-style planning and RAID tracking.

      ## Scope
      - Define an ISO 21500/21502-inspired workflow spine: Initiate → Plan → Implement → Control → Close
      - Introduce a **RAID register** (Risks, Assumptions, Issues, Dependencies) with CRUD and lifecycle states.
      - Provide a basic **Project Charter** + **Project Management Plan (PMP)** document model.

      ## Requirements
      - Data model:
        - Project
        - WorkPackage / Deliverable
        - RAIDItem with type {Risk, Assumption, Issue, Dependency}, status, owner, probability/impact (for risks), due date, links.
      - API:
        - REST endpoints for RAID CRUD + list/filter.
        - Versioned API route layout (e.g., `/api/v1`).
      - Labels: `step:1`, `backend/api/tui`

      ## Mandatory tests
      - Add/update documentation in `tests/README.md` describing how to run RAID-related tests.
      - `tests/unit`: models/validation for RAID fields.
      - `tests/integration`: API CRUD for RAID endpoints.
      - (If not applicable yet) create placeholders/skips with clear TODOs, not empty suites.

      ## Acceptance criteria
      - RAID endpoints exist, validated, and documented.
      - Unit + integration tests pass in CI.
      - Clear mapping of fields to RAID semantics.

    labels:
      - step:1
      - backend/api/tui

  - title: "Step 1 — Implement ISO workflow states + audit/events (backend)"
    body: |
      ## Goal
      Provide an execution-control backbone aligned to ISO 21500/21502 by modeling workflow stages and capturing auditable state transitions.

      ## Scope
      - Introduce workflow state machine for Projects and WorkPackages:
        - Initiate, Plan, Implement, Control, Close
      - Record state transitions as audit events.
      - Expose read-only endpoints for audit/event streams.

      ## Requirements
      - Deterministic state transition rules (documented).
      - Audit/Event schema includes: entity, from/to state, actor, timestamp, note.
      - Labels: `step:1`, `backend/api/tui`

      ## Mandatory tests
      - `tests/unit`: state transition validation, invalid transitions.
      - `tests/integration`: API exposes audit/event stream; verify transition writes.
      - Update `tests/README.md` with how to run workflow/audit tests.

      ## Acceptance criteria
      - Workflow stages implemented with documented rules.
      - Audit events persist and are retrievable.
      - Unit + integration tests green.

    labels:
      - step:1
      - backend/api/tui

  - title: "Step 1 — End-to-end smoke for RAID + workflow spine (tests/e2e)"
    body: |
      ## Goal
      Establish an E2E baseline that proves the ISO workflow spine and RAID register can be exercised through the exposed interfaces.

      ## Scope
      - Add E2E tests covering:
        - Create project → advance through at least 2 workflow states
        - Create/read/update a RAID item
        - Verify audit/event shows the transition

      ## Requirements
      - Place tests under `tests/e2e`.
      - Ensure `tests/README.md` documents E2E setup and commands.
      - Labels: `step:1`, `tests/e2e`

      ## Acceptance criteria
      - E2E suite runnable locally + CI.
      - Tests are stable (no sleep-based flakiness; use retries/awaits).

    labels:
      - step:1
      - tests/e2e

AI-Agent-Framework-Client:
  - title: "Step 1 — Web UI: RAID register views (list + detail + filters)"
    body: |
      ## Goal
      Build the first client-facing surface for PMP + RAID by exposing the RAID register in the Web UI.

      ## Scope
      - RAID list view with filters (type/status/owner/due date).
      - RAID detail view with editable fields.
      - Basic create flow.

      ## Requirements
      - Align field naming with backend API.
      - UX: clear type badges, severity indicators for risks.
      - Labels: `step:1`, `webui/ux`

      ## Mandatory tests
      - `tests/unit`: component/unit tests for list + detail.
      - `tests/integration`: API client integration (mock server or contract tests).
      - Update `tests/README.md` with client test commands.

      ## Acceptance criteria
      - User can manage RAID items from UI.
      - Unit + integration tests pass.

    labels:
      - step:1
      - webui/ux

  - title: "Step 1 — Client workflow spine UI (project stage indicator + transitions)"
    body: |
      ## Goal
      Provide a visible ISO 21500/21502 workflow spine in the client so users can see and drive project/work-package stages.

      ## Scope
      - Stage indicator (Initiate/Plan/Implement/Control/Close).
      - Transition UI with confirmation + optional note.
      - Basic audit trail viewer (read-only).

      ## Requirements
      - Must consume backend audit/event endpoints.
      - Labels: `step:1`, `webui/ux`

      ## Mandatory tests
      - `tests/unit`: stage indicator + transition UI.
      - `tests/integration`: verify audit trail renders from mocked/contracted API.
      - Update `tests/README.md` accordingly.

      ## Acceptance criteria
      - Stages render correctly, transitions trigger API.
      - Audit trail visible and correct.

    labels:
      - step:1
      - webui/ux

  - title: "Step 1 — Client E2E: RAID + workflow happy path (tests/e2e)"
    body: |
      ## Goal
      Ensure the client can execute the core Step 1 PMP+RAID workflow end-to-end.

      ## Scope
      - E2E scenario:
        - Open project
        - Advance stage
        - Create a RAID risk
        - Verify it appears in list and detail

      ## Requirements
      - Add tests under `tests/e2e`.
      - Update `tests/README.md` with environment variables, headless mode, and CI commands.
      - Labels: `step:1`, `tests/e2e`

      ## Acceptance criteria
      - Client E2E suite runs reliably.
      - Scenario passes in CI.

    labels:
      - step:1
      - tests/e2e
